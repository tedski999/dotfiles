#!/usr/bin/fish

# Prompt user to change the monitor display layout
# Dependencies: xrandr bspc hsetroot

# TODO: generalise monitor names

test (cat /sys/class/drm/card1-HDMI-A-3/status) != "connected"
and set choices "mobile"
or set choices "docked
mirror
attach
mobile"

test $argv[1]
and set choice $argv[1]
or set choice (choose -c $choices -p "ï¡¸ Display Ctrl")

switch $choice
	case "mobile"
		xrandr --output eDP-1 --auto --primary --output HDMI-1-0 --off
		hsetroot -center .config/wallpaper.png -contrast 1.2
		bspc monitor eDP-1 --reset-desktops 1 2 3 4 5 6 7 8 9 0
	case "docked"
		xrandr --output eDP-1 --auto --primary --output HDMI-1-0 --auto --rotate right --left-of eDP-1
		hsetroot -center .config/wallpaper.png -contrast 1.2
		bspc monitor eDP-1 --reset-desktops 1 2 3 4 5 6 7 8 9
		bspc monitor HDMI-1-0 --reset-desktops 0
	case "mirror"
		xrandr --output eDP-1 --auto --primary --output HDMI-1-0 --auto --same-as eDP-1
		hsetroot -center .config/wallpaper.png -contrast 1.2
		bspc monitor eDP-1 --reset-desktops 1 2 3 4 5 6 7 8 9 0
	case "attach"
		xrandr --output eDP-1 --auto --primary  --output HDMI-1-0 --auto --rotate normal --left-of eDP-1
		hsetroot -center .config/wallpaper.png -contrast 1.2
		bspc monitor eDP-1 --reset-desktops 1 2 3 4 5
		bspc monitor HDMI-1-0 --reset-desktops 6 7 8 9 0
	case "*"
		return 1
end
